\begin{tikzpicture}[scale=0.6]

\def \xmax{4}
\def \ymax{4}
\draw[ystep=1, xstep=1]
	(0,0) grid (\xmax,\ymax);

\foreach \y in {0.5,1.5,...,\ymax}
{%
    \foreach \x in {0.5,1.5,...,\xmax}
    {%
      % floor the positions, as they are .5 and reverse vertical order
      \pgfmathtruncatemacro{\posX}{\x}
      \pgfmathtruncatemacro{\posY}{\ymax-\y}
      % calculate the index for each position
      \pgfmathtruncatemacro{\index}{\posX + \xmax * \posY}
      \node[above left] at (\x,\y){\tiny$\quad\quad\index$};
    }
}

\node at (7,3) {Example with $N=4$};

\def\startx{0.5}
\def\starty{3.5}

% help lines
\draw[latex-,style=help lines, dashed] (\startx + 0,\starty - 1) --++ (3,1);
\draw[latex-,style=help lines, dashed] (\startx + 0,\starty - 2) --++ (3,1);
\draw[latex-,style=help lines, dashed] (\startx + 0,\starty - 3) --++ (3,1);

% scanning
\draw[o-latex,style=help lines, red, thick] (\startx,\starty - 0) --++ ( 3,0);
\draw[-latex,style=help lines, red, thick] (\startx,\starty - 1) --++ ( 3,0);
\draw[-latex,style=help lines, red, thick] (\startx,\starty - 2) --++ ( 3,0);
\draw[-latex,style=help lines, red, thick] (\startx,\starty - 3) --++ ( 3,0);

\def \xmax{16}
\def \ymax{1}
\def\startx{0}
\def\starty{-2}

\draw[ystep=1, xstep=1,black!0]
	(\startx,\starty) grid (\startx+\xmax,\starty+\ymax);
% \foreach \x in {0,1,...,15}
% {%
%     \node[above left] at (\x+\startx+0.5,\starty+0.5) {\tiny$\quad\quad\x$};
% }

\draw[o-latex,style=help lines,red!0,thick] (\startx+0.5,\starty+0.5) --++ (\xmax-1,0);

\end{tikzpicture}
